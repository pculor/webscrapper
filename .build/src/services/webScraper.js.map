{"version":3,"file":"webScraper.js","sourceRoot":"/","sources":["src/services/webScraper.ts"],"names":[],"mappings":";;;;;;AAAA,0DAAkC;AAClC,sFAAyD;AACzD,oDAA4B;AAE5B,gBAAM,CAAC,MAAM,EAAE,CAAC;AAEhB,MAAM,EAAE,kBAAkB,EAAE,GAAG,4BAAa,CAAC;AAGtC,MAAM,WAAW,GAAG,KAAK,EAAE,OAAO,EAAE,EAAE;IAC5C,MAAM,OAAO,GAAG,MAAM,mBAAS,CAAC,MAAM,CAAC;QACtC,QAAQ,EAAE,KAAK;QACf,eAAe,EAAE,IAAI;QACrB,cAAc,EAAE,8DAA8D;KAC9E,CAAC,CAAC;IACH,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;IACrC,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;QACxB,SAAS,EAAE,cAAc;KACzB,CAAC,CAAC;IAEH,MAAM,IAAI,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;IAGtD,gBAAgB;IAChB,MAAM,gBAAgB,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE;QACjD,6CAA6C;QAC7C,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAEnD,MAAM,OAAO,GAAG,EAAE,CAAC;QAEnB,SAAS,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;QAE9F,OAAO,EAAE,OAAO,EAAE,CAAC;IACpB,CAAC,CAAC,CAAC;IAEH,gCAAgC;IAChC,MAAM,eAAe,GAAG,gBAAgB,CAAC;IACzC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;IAE7B,yBAAyB;IACzB,MAAM,SAAS,GAAG,gEAAgE,CAAC;IACnF,MAAM,MAAM,GAAG,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;IACzC,MAAM,kBAAkB,CAAC,KAAK,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;IAElD,MAAM,OAAO,CAAC,KAAK,EAAE,CAAC;AACvB,CAAC,CAAC;AApCW,QAAA,WAAW,eAoCtB","sourcesContent":["import puppeteer from 'puppeteer';\nimport databaseQuery from '../models/databaseConnection';\nimport dotenv from 'dotenv';\n\ndotenv.config();\n\nconst { databaseConnection } = databaseQuery;\n\n\nexport const webScrapper = async (siteUrl) => {\n\tconst browser = await puppeteer.launch({\n\t\theadless: false,\n\t\tdefaultViewport: null,\n\t\texecutablePath: '/Applications/Google Chrome.app/Contents/MacOS/Google Chrome',\n\t});\n\tconst page = await browser.newPage();\n\tawait page.goto(siteUrl, {\n\t\twaitUntil: 'networkidle2',\n\t});\n  \n\tawait page.setViewport({ width: 1680, height: 1050 });\n\n\n\t// Get page data\n\tconst imageDescription = await page.evaluate(() => {\n\t\t// Fetch the first element with class \"quote\"\n\t\tconst imageList = document.querySelector('.islrc');\n\n\t\tconst dataSet = [];\n\t\n\t\timageList.querySelectorAll('.bytUYc').forEach((element) => dataSet.push(element.textContent));\n\t\n\t\treturn { dataSet };\n\t});\n\t\n\t// Display the image description\n\tconst descriptionText = imageDescription;\n\tconsole.log(descriptionText);\n\n\t// write text to database\n\tconst userQuery = 'INSERT INTO datalog (imageDescription) VALUES ($1) returning *';\n\tconst params = [descriptionText.dataSet];\n\tawait databaseConnection.query(userQuery, params);\n\n\tawait browser.close();\n};"]}